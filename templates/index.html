<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PrepGenius – Smart Mentor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="top-bar">
    <div>
        <div class="greeting">Good Afternoon</div>
        <div class="username" id="usernameDisplay">Student</div>
    </div>
    <nav class="nav">
        <button class="nav-btn active" data-page="dashboard">Dashboard</button>
        <button class="nav-btn" data-page="notes">Notes</button>
        <button class="nav-btn" data-page="quiz">Quiz</button>
        <button class="nav-btn" data-page="questions">Questions</button>
        <button class="nav-btn" data-page="chat">Chat</button>
        <button class="nav-btn" data-page="mentor">Mentor</button>
        <button class="nav-btn" data-page="history">History</button>
    </nav>
</div>

<main>
    <section class="page visible" id="page-dashboard">
        <div class="cards-row">
            <div class="card">
                <div class="card-title">Day Streak</div>
                <div class="card-value" id="dayStreak">0</div>
            </div>
            <div class="card">
                <div class="card-title">Notes Created</div>
                <div class="card-value" id="notesCreated">0</div>
            </div>
            <div class="card">
                <div class="card-title">Quizzes Taken</div>
                <div class="card-value" id="quizzesTaken">0</div>
            </div>
        </div>

        <div class="card full">
            <div class="card-title">Today's Goal</div>
            <div class="goal-sub" id="goalSubtitle">0 out of 4 tasks completed. Start studying!</div>
            <div class="progress-bar">
                <div class="progress-inner" id="goalBar" style="width:0%"></div>
            </div>
        </div>

        <h2 class="section-heading">AI Study Tools</h2>
        <div class="tools-grid">
            <div class="tool-card" data-page-link="notes">
                <h3>Generate Notes</h3>
                <p>Upload textbooks and get AI-powered notes.</p>
            </div>
            <div class="tool-card" data-page-link="quiz">
                <h3>Generate Quiz</h3>
                <p>Create MCQs from PDFs for quick revision.</p>
            </div>
            <div class="tool-card" data-page-link="questions">
                <h3>Generate Questions</h3>
                <p>Get exam-style questions per chapter.</p>
            </div>
            <div class="tool-card" data-page-link="chat">
                <h3>AI Chatbot</h3>
                <p>Ask doubts and get instant help.</p>
            </div>
            <div class="tool-card" data-page-link="mentor">
                <h3>Personal Mentor</h3>
                <p>Daily study plan & personalised schedule.</p>
            </div>
            <div class="tool-card" data-page-link="history">
                <h3>History</h3>
                <p>View your recent activity.</p>
            </div>
        </div>
    </section>

    <section class="page" id="page-notes">
        <div class="card full">
            <h2>Generate Notes</h2>
            <form id="notesForm">
                <label>PDF File
                    <input type="file" name="file" accept="application/pdf" required>
                </label>
                <label>Prompt (optional)
                    <input type="text" name="prompt" placeholder='e.g. "Make notes of chapter 1"'>
                </label>
                <button type="submit">Generate Notes</button>
            </form>
            <div class="output-wrapper">
                <div class="output" id="notesOutput"></div>
                <button type="button" class="secondary-btn"
                        onclick="downloadOutput('notesOutput', 'notes.txt')">
                    Download Notes
                </button>
            </div>
        </div>
    </section>

    <section class="page" id="page-quiz">
        <div class="card full">
            <h2>Generate Quiz</h2>
            <form id="quizForm">
                <label>PDF File
                    <input type="file" name="file" accept="application/pdf" required>
                </label>
                <label>Number of questions (default 5)
                    <input type="number" name="numQuestions" min="1" max="50" placeholder="5">
                </label>
                <button type="submit">Generate Quiz</button>
            </form>
            <div class="status" id="quizStatus"></div>
            <div class="output-wrapper">
                <div class="output" id="quizOutput"></div>
                <button type="button" class="secondary-btn"
                        onclick="downloadOutput('quizOutput', 'quiz.txt')">
                    Download Quiz
                </button>
            </div>
        </div>
    </section>

    <section class="page" id="page-questions">
        <div class="card full">
            <h2>Generate Questions</h2>
            <form id="questionsForm">
                <label>PDF File
                    <input type="file" name="file" accept="application/pdf" required>
                </label>
                <label>Prompt (optional)
                    <input type="text" name="prompt" placeholder='e.g. "10 questions per module"'>
                </label>
                <button type="submit">Generate Questions</button>
            </form>
            <div class="output-wrapper">
                <div class="output" id="questionsOutput"></div>
                <button type="button" class="secondary-btn"
                        onclick="downloadOutput('questionsOutput', 'questions.txt')">
                    Download Questions
                </button>
            </div>
        </div>
    </section>

    <section class="page" id="page-chat">
        <div class="card full">
            <h2>AI Chatbot</h2>
            <form id="chatForm">
                <input type="text" id="chatQuestion" placeholder="Ask your question..." required>
                <button type="submit">Ask</button>
            </form>
            <div class="output-wrapper">
                <div class="output" id="chatOutput"></div>
                <button type="button" class="secondary-btn"
                        onclick="downloadOutput('chatOutput', 'chat_answer.txt')">
                    Download Answer
                </button>
            </div>
        </div>
    </section>

    <section class="page" id="page-mentor">
        <div class="card full">
            <h2>Personal Mentor</h2>
            <form id="mentorForm">
                <label>Subject / Topic
                    <input type="text" name="subject" required placeholder="e.g., DBMS, DSA, Aptitude">
                </label>
                <label>Total days to finish
                    <input type="number" name="totalDays" required>
                </label>
                <label>Hours per day
                    <input type="number" name="hoursPerDay" required>
                </label>
                <label>Your level (optional)
                    <input type="text" name="level" placeholder="beginner / intermediate / advanced">
                </label>
                <label>Extra notes (optional)
                    <textarea name="notes" rows="3" placeholder="exam date, weak areas, syllabus..."></textarea>
                </label>
                <button type="submit">Generate Plan</button>
            </form>
            <div class="output-wrapper">
                <div class="output" id="mentorOutput"></div>
                <button type="button" class="secondary-btn"
                        onclick="downloadOutput('mentorOutput', 'study_plan.txt')">
                    Download Plan
                </button>
            </div>
        </div>
    </section>

    <section class="page" id="page-history">
        <div class="card full">
            <h2>Your Activity History</h2>
            <div id="historyEmpty" class="muted">Loading...</div>
            <ul id="historyList" class="history-list"></ul>
        </div>
    </section>
</main>

<footer>
    © PrepGenius (local demo)
</footer>

<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
